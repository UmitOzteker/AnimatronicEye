# Animatronic Eyes Project üëÄü§ñ
![GitHub Total Commits](https://img.shields.io/github/commit-activity/t/UmitOzteker/AnimatronicEye)
![GitHub Last Commit](https://img.shields.io/github/last-commit/UmitOzteker/AnimatronicEye)
![GitHub issues](https://img.shields.io/github/issues/UmitOzteker/AnimatronicEye)
![GitHub License](https://img.shields.io/github/license/UmitOzteker/AnimatronicEye)

This project uses an **STM32F031K6** microcontroller to create animatronic eyes controlled by an analog joystick. At its core, the system features **6 servo motors**: two for primary eye movement (pan and tilt), and four for independent eyelid control.

![AnimatronicEye](https://github.com/user-attachments/assets/3de86c64-fa84-479c-9cfe-ac2aea9f51a6)

## ‚ú® Key Features

  * **Precise Control**: A two-axis analog joystick allows for intuitive control over horizontal and vertical eye movement.
  * **Independent Eyelid Control**: Four separate servos enable realistic blinking and squinting by controlling each eyelid (upper and lower) independently.
  * **Single-Eye Blink**: A special feature allows a single eye to blink when the joystick's button is pressed.
  * **Autonomous Mode**: A random movement mode is activated after a period of user inactivity, simulating natural, lifelike eye motion.
  * **Modular Design**: The project includes pre-configured pinouts for potential future expansions, such as integrating ultrasonic sensors for proximity detection.

## ‚öôÔ∏è Hardware Requirements

  * **Microcontroller**: STM32F031K6
  * **Servo Motors**: 6x SG90 or similar small-sized servos.
  * **Controller**: A two-axis analog joystick with a push-button.
  * **Power Supply**: A power source capable of supplying enough current for both the servos and the microcontroller. üîã

-----

## üìå Pin Connections

The hardware connections for this project were configured using **STM32CubeIDE**. The following table provides a clear overview of the essential pin assignments for PWM signals and analog inputs.

### Eyelid & Eye Movement Servos (PWM Outputs)

| Function | Timer Channel | Microcontroller Pin |
| :--- | :--- | :--- |
| **Right Upper Eyelid** | TIM3, Channel 1 | PB4 |
| **Left Upper Eyelid** | TIM2, Channel 4 | PA3 |
| **Right Lower Eyelid** | TIM3, Channel 2 | PA7 |
| **Left Lower Eyelid** | TIM2, Channel 3 | PA2 |
| **X-Axis Eye Movement** | TIM3, Channel 3 | PB0 |
| **Y-Axis Eye Movement** | TIM3, Channel 4 | PB1 |

### Joystick & Sensors

| Function | Connection Pin | Notes |
| :--- | :--- | :--- |
| **Joystick X-Axis** | PA0 | ADC input for horizontal eye control. Configured with DMA for continuous reading. |
| **Joystick Y-Axis** | PA1 | ADC input for vertical eye control. Configured with DMA for continuous reading. |
| **Joystick Button** | PA8 | Configured as an external interrupt (EXTI) to detect button presses. |
| **Ultrasonic Sensors (ECHO)** | PA4, PA5, PB7 | These pins are configured as external interrupts (EXTI) to detect the rising and falling edges of the sensor's echo signal. |
| **Ultrasonic Sensors (TRIG)** | PA6, PB6 | These are general-purpose output pins used to send the trigger pulse to the sensors. |

-----

## üöÄ How It Works

1.  **Initialization**: Upon startup, the system initializes all servos to a predefined neutral position.
2.  **Joystick Control**: The main loop continuously reads analog values from the joystick's X and Y axes using **DMA** (Direct Memory Access) on pins PA0 and PA1. These values are then mapped to the corresponding servo positions.
3.  **Blink Feature**: An interrupt service routine (ISR) on pin PA8 detects a joystick button press. This triggers a specific sequence of servo movements to perform a single-eye blink.
4.  **PWM Control**: All servo motors are driven by PWM signals generated by the STM32's internal timers. The PWM period for `TIM2` and `TIM3` is set to `19999`. Adjusting the duty cycle of these signals changes the position of the servos.
5.  **Random Mode**: If the joystick remains untouched for a specified duration, the system enters a random mode. In this state, the eyes and eyelids perform random, lifelike movements. This is achieved using random number generation and timer interrupts.
